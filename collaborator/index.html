<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Collaborator Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            overflow: hidden; /* Prevent body scroll */
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        .terminal-output {
            font-family: 'Fira Code', monospace;
        }
        /* Custom scrollbar for a more terminal-like feel */
        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }
        .terminal-output::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        .terminal-output::-webkit-scrollbar-thumb {
            background-color: #4a5568;
            border-radius: 4px;
            border: 2px solid #1a1a1a;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300 p-2 sm:p-4">

    <!-- Main Terminal Window -->
    <div class="w-full h-full bg-black rounded-xl shadow-2xl border border-gray-700 overflow-hidden flex flex-col">
        
        <!-- Terminal Header -->
        <div class="bg-gray-800 p-3 flex justify-between items-center border-b border-gray-700 flex-shrink-0">
            <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
                <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                <p class="text-sm ml-2 text-gray-400">Collaborator Interaction Log</p>
            </div>
            <button id="clearButton" class="text-sm bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md transition-colors duration-200">
                Clear
            </button>
        </div>

        <!-- Collaborator Info & Controls -->
        <div class="p-4 bg-gray-800/50 border-b border-gray-700 flex-shrink-0">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                <div class="flex items-center gap-2 flex-wrap">
                     <span class="font-semibold text-green-400">Payload URL:</span>
                     <code id="collaboratorUrl" class="bg-gray-900 text-yellow-400 px-2 py-1 rounded-md text-sm select-all"></code>
                </div>
                <button id="copyButton" class="w-full sm:w-auto text-sm bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-md transition-colors duration-200">
                    Copy URL
                </button>
            </div>
        </div>

        <!-- Terminal Output Area -->
        <div id="terminalOutput" class="terminal-output flex-grow p-4 overflow-y-auto text-sm">
            <!-- Real-time logs will be appended here -->
            <div class="text-gray-500">Menunggu interaksi... Gunakan URL di atas dalam payload Anda.</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element References ---
            const collaboratorUrlEl = document.getElementById('collaboratorUrl');
            const copyButton = document.getElementById('copyButton');
            const clearButton = document.getElementById('clearButton');
            const terminalOutput = document.getElementById('terminalOutput');

            // --- Initial Setup ---
            let uniqueId = '';

            // Function to generate a random alphanumeric string for the subdomain
            const generateUniqueId = (length = 16) => {
                const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
                let result = '';
                for (let i = 0; i < length; i++) {
                    result += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return result;
            };

            // Function to set the unique collaborator URL on page load
            const initializeCollaborator = () => {
                uniqueId = generateUniqueId();
                // NOTE: Changed to match the GitHub Pages URL format request.
                // The unique ID is now a query parameter.
                collaboratorUrlEl.textContent = `https://nmwafa.github.io/collaborator?id=${uniqueId}`;
            };

            // --- Event Listeners ---

            // Copy button functionality
            copyButton.addEventListener('click', () => {
                const urlToCopy = collaboratorUrlEl.textContent;
                const textArea = document.createElement("textarea");
                textArea.value = urlToCopy;
                textArea.style.position = "fixed";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    copyButton.textContent = 'Copied!';
                    copyButton.classList.remove('bg-blue-600', 'hover:bg-blue-500');
                    copyButton.classList.add('bg-green-600');
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                }
                document.body.removeChild(textArea);

                setTimeout(() => {
                    copyButton.textContent = 'Copy URL';
                    copyButton.classList.remove('bg-green-600');
                    copyButton.classList.add('bg-blue-600', 'hover:bg-blue-500');
                }, 2000);
            });

            // Clear button functionality
            clearButton.addEventListener('click', () => {
                terminalOutput.innerHTML = '<div class="text-gray-500">Log dibersihkan. Menunggu interaksi baru...</div>';
            });

            // --- Real-time Log Simulation ---
            // This part simulates receiving data. A real implementation needs a backend.
            const addLogEntry = (logData) => {
                const initialMessage = terminalOutput.querySelector('.text-gray-500');
                if (initialMessage) {
                    initialMessage.remove();
                }
                const logEntry = document.createElement('div');
                logEntry.classList.add('mb-3');
                logEntry.innerHTML = logData;
                terminalOutput.appendChild(logEntry);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            };

            const simulateIncomingLog = () => {
                const interactionTypes = ['HTTP', 'DNS'];
                const methods = ['GET', 'POST', 'HEAD'];
                const ips = ['8.8.8.8', '1.1.1.1', '208.67.222.222', '192.168.1.101'];
                const userAgents = [
                    'curl/7.64.1', 'Wget/1.20.3 (linux-gnu)',
                    'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36',
                    'Go-http-client/1.1'
                ];
                const type = interactionTypes[Math.floor(Math.random() * interactionTypes.length)];
                const randomIp = ips[Math.floor(Math.random() * ips.length)];
                const timestamp = new Date().toISOString();
                let logHtml = `<div class="text-cyan-400">[${timestamp}]</div>`;

                if (type === 'DNS') {
                    logHtml += `
                        <div><span class="text-yellow-400 font-bold">[DNS]</span> Query dari <span class="text-red-400">${randomIp}</span></div>
                        <div>  - Type: A</div>
                        <div>  - Query: <span class="font-semibold">ssrf.github.io</span></div>`;
                } else { // HTTP
                    const randomMethod = methods[Math.floor(Math.random() * methods.length)];
                    const randomUserAgent = userAgents[Math.floor(Math.random() * userAgents.length)];
                    logHtml += `
                        <div><span class="text-green-400 font-bold">[HTTP]</span> Request dari <span class="text-red-400">${randomIp}</span></div>
                        <div>  - Method: ${randomMethod}</div>
                        <div>  - URL: /collaborator?id=${uniqueId}</div>
                        <div>  - User-Agent: ${randomUserAgent}</div>`;
                }
                
                addLogEntry(logHtml);
            };

            // Start the simulation loop
            initializeCollaborator();
            setInterval(simulateIncomingLog, 5000 + Math.random() * 3000);
        });
    </script>
</body>
</html>
